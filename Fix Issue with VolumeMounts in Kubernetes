Fix Issue with VolumeMounts in Kubernetes
==================================
Success doesn’t come to you, you go to it.

– Marva Collins
===============
Problem statement:
We deployed a Nginx and PHP-FPM based setup on Kubernetes cluster last week and it had been working fine so far. This morning one of the team members made a change somewhere which caused some issues, and it stopped working. Please look into the issue and fix it:



The pod name is nginx-phpfpm and configmap name is nginx-config. Figure out the issue and fix the same.


Once issue is fixed, copy /home/thor/index.php file from the jump host to the nginx-container under nginx document root and you should be able to access the website using Website button on top bar.


Note: The kubectl utility on jump_host has been configured to work with the kubernetes cluster.
=========================
step by step answer:
kubectl get pods
    2  kubectl get configmap
    3  kubectl describe configmap nginx-config 
    4  kubectl get pod nginx-phpfpm -o yaml > /tmp/nginx.yaml
    5  vi /tmp/nginx.yaml  ----> Edit the nginx.yaml file and changed ‘/usr/share/nginx/html’ to ‘/var/www/html’ in 3 places.
    6  kubectl replace --force -f /tmp/nginx.yaml 
    7  kubectl get pods
    8  ls -lart /home/thor/
    9  kubectl cp  /home/thor/index.php  nginx-phpfpm:/var/www/html -c nginx-container
   10  kubectl exec -it nginx-phpfpm -c nginx-container  -- curl -I  http://localhost:8099